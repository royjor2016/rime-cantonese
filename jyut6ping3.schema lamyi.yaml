# Rime schema
# encoding: utf-8

schema:
  schema_id: jyut6ping3
  name: ç²µèªæ‹¼éŸ³
  version: "2020.11.05"
  author:
    - è—å…’
  description: |
    æ¡ç”¨é¦™æ¸¯èªè¨€å­¸å­¸æœƒç²µèªæ‹¼éŸ³æ–¹æ¡ˆ
    https://www.lshk.org/jyutping
    å…¼å®¹æ•™è‚²å­¸é™¢æ‹¼éŸ³æ–¹æ¡ˆ

    æä¾›å››ç¨®åæŸ¥æ–¹æ¡ˆï¼Œ[`]éµå¯ç”¨å€‰é ¡ã€ç²µèªå…©åˆ†ã€æ™®æ‹¼æˆ–ç­†åŠƒä»»ä¸€ç¨®ç·¨ç¢¼åæŸ¥ç²µæ‹¼ï¼Œ[`C]éµå–®ç¨ç”¨å€‰é ¡åæŸ¥ï¼Œ[`L]éµå–®ç¨ç”¨ç²µèªå…©åˆ†åæŸ¥ï¼Œ[`P]éµå–®ç¨ç”¨æ™®æ‹¼åæŸ¥ï¼Œ[`B]éµå–®ç¨ç”¨ç­†åŠƒåæŸ¥
    è²èª¿è¼¸å…¥ qå¹³ vä¸Š xå» ï¼ˆé›™æ“Šç‚ºé™½èª¿ï¼‰
    PCä¸ŠæŒ‰Ctrl+Enterå¯å°‡æ‹¼éŸ³ä¸Šå±ï¼ŒæŒ‰Ctrl+Shift+Enterå¯å°‡å€™é¸é …æç¤ºæ‹¼éŸ³ä¸Šå±

  dependencies:
    - cangjie5
    - luna_pinyin
    - loengfan
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è‹±æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ å‚³çµ±, ç®€ä½“ ]
  - name: extended_charset
    states: [ å¸¸ç”¨, å¢å»£ ]
    reset: 1
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    states: [ ã€‡, ğŸ˜Š ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@cangjie5
    - affix_segmentor@luna_pinyin
    - affix_segmentor@loengfan
    - affix_segmentor@stroke
    - affix_segmentor@reverse_lookup
    - affix_segmentor@cangjie5_lookup
    - affix_segmentor@luna_pinyin_lookup
    - affix_segmentor@loengfan_lookup
    - affix_segmentor@stroke_lookup
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - script_translator@cangjie5
    - script_translator@luna_pinyin
    - script_translator@loengfan
    - script_translator@stroke
    - reverse_lookup_translator@cangjie5_lookup
    - reverse_lookup_translator@luna_pinyin_lookup
    - reverse_lookup_translator@loengfan_lookup
    - reverse_lookup_translator@stroke_lookup
    - punct_translator
    - script_translator
    - reverse_lookup_translator
  filters:
    - simplifier
    - simplifier@emoji_suggestion
    - uniquifier
    - reverse_lookup_filter@cangjie5_reverse_lookup
    - reverse_lookup_filter@luna_pinyin_reverse_lookup
    - reverse_lookup_filter@loengfan_reverse_lookup
    - reverse_lookup_filter@stroke_reverse_lookup

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " '"
  algebra:
    - derive/([123456])//         # å¿½ç•¥å£°è°ƒ
    - derive/^([aeiou])/q$1/      # å¢åŠ  q è¡¨ç¤ºå–‰å¡
    - xform/1/q/                  # é™°å¹³
    - xform/4/qq/                 # é™½å¹³
    - xform/2/v/                  # é™°ä¸Š
    - xform/5/vv/                 # é™½ä¸Š
    - xform/3/x/                  # é™°å»
    - xform/6/xx/                 # é™½å»
    - derive/^jy?([aeiour])/y$1/  # å®¹éŒ¯ je -> ye, jyu -> yu
    - derive/yu/y/                # æ•™é™¢å¼ jyu -> jyï¼Œyu -> y
    - derive/eoi$/oey/            # æ•™é™¢å¼ eoi <-> oey
    - derive/eoi$/eoy/            # å®¹éŒ¯
    - derive/aa$/r/               # å®¹éŒ¯ aa -> r
    - derive/aa$/a/               # å®¹éŒ¯ aa -> a
    - abbrev/^([a-z]).+$/$1/      # é¦–å­—æ¯ç°¡æ‹¼
    - derive/^z/dz/               # æ•™é™¢å¼
    - derive/^c/ts/               # æ•™é™¢å¼
    - abbrev/^(ng).+$/$1/         # è²æ¯ç°¡æ‹¼
    - abbrev/^([gk]w).+$/$1/      # è²æ¯ç°¡æ‹¼
    - abbrev/^(dz).+$/$1/         # è²æ¯ç°¡æ‹¼
    - abbrev/^(ts).+$/$1/         # è²æ¯ç°¡æ‹¼
    - derive/oe(ng|k)$/eo$1/      # æ•™é™¢å¼ oe(ng|k) -> eo(ng|k)
    - derive/eo([int])$/oe$1/     # å®¹éŒ¯ eo(int) -> oe(int)
    - derive/([aeiou])ng$/$1gn/   # ç³¾éŒ¯ [aeiou]ng -> [aeiou]gn
    - derive/([aeiou])ng$/$1mg/   # ç³¾éŒ¯ [aeiou]ng -> [aeiou]mg

menu:
  alternative_select_keys: "123456789"
  page_size: 7                    # å€™é¸é …æ•¸ç›®


translator:
  dictionary: jyut6ping3
  spelling_hints: 20              # å€™é¸å­—æç¤ºæ‹¼éŸ³çš„æ•¸ç›®ï¼Œæ©«æ’é¡¯ç¤ºæ™‚å»ºè­°è¨­ç½®ç‚º0
  preedit_format:
    - xform/([aeioumngptk])qq/${1}4/
    - xform/([aeioumngptk])q/${1}1/
    - xform/([aeioumngptk])vv/${1}5/
    - xform/([aeioumngptk])v/${1}2/
    - xform/([aeioumngptk])xx/${1}6/
    - xform/([aeioumngptk])x/${1}3/
#  comment_format:
#    - xform/^/(/
#    - xform/$/)/

reverse_lookup:
  tag: reverse_lookup
  prefix: "`"
  suffix: ;
  tips: ã€”å€‰é ¡/æ™®æ‹¼/å…©åˆ†/ç­†åŠƒã€•
  closing_tips: ã€”ç²µæ‹¼ã€•
  extra_tags:
    - cangjie5_lookup
    - loengfan_lookup  
    - luna_pinyin_lookup
    - stroke_lookup

cangjie5:
  tag: cangjie5
  dictionary: cangjie5
  prefix: "`C"
  suffix: ";"
  tips: ã€”å€‰é ¡ã€•
  closing_tips: ã€”ç²µæ‹¼ã€•
  initial_quality: 100000      	  # èª¿æ•´è©²ç·¨è­¯å™¨å‡ºå­—å„ªå…ˆåº¦

luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  prefix: "`P"
  suffix: ";"
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
  tips: ã€”æ™®æ‹¼ã€•
  closing_tips: ã€”ç²µæ‹¼ã€•
  initial_quality: 50000	      # èª¿æ•´è©²ç·¨è­¯å™¨å‡ºå­—å„ªå…ˆåº¦

loengfan:
  tag: loengfan
  dictionary: loengfan
  prefix: "`L"
  suffix: ";"
  tips: ã€”å…©åˆ†ã€•
  closing_tips: ã€”ç²µæ‹¼ã€•
  initial_quality: 5000      	  # èª¿æ•´è©²ç·¨è­¯å™¨å‡ºå­—å„ªå…ˆåº¦

stroke:
  tag: stroke
  dictionary: stroke
  prefix: "`B"
  suffix: ";"
  preedit_format:
    - xlit/wspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  tips: ã€”ç­†åŠƒã€•
  closing_tips: ã€”ç²µæ‹¼ã€•
  initial_quality: 1000	          # èª¿æ•´è©²ç·¨è­¯å™¨å‡ºå­—å„ªå…ˆåº¦

cangjie5_lookup:
  tag: cangjie5_lookup
  dictionary: cangjie5
  prefix: "`C"
  suffix: ";"
  tips: ã€”å€‰é ¡ã€•
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

luna_pinyin_lookup:
  tag: luna_pinyin_lookup
  dictionary: luna_pinyin
  prefix: "`P"
  suffix: ";"
  tips: ã€”æ™®æ‹¼ã€•
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

loengfan_lookup:
  tag: loengfan_lookup
  dictionary: loengfan
  prefix: "`L"
  suffix: ";"
  tips: ã€”å…©åˆ†ã€•
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

stroke_lookup:
  tag: stroke_lookup
  dictionary: stroke
  prefix: "`B"
  suffix: ";"
  tips: ã€”ç­†åŠƒï½œæ©«wè±sæ’‡pæºnæŠ˜zã€•
  comment_format:
    - xform/^/ã€”/
    - xform/$/ã€•/

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    reverse_lookup: "`[a-z]*;?$"
    cangjie5_lookup: "^`C[a-z]*;?$"
    luna_pinyin_lookup: "^`P[a-z]*;?$"
    loengfan_lookup: "^`L[a-z]*;?$"
    stroke_lookup: "^`B[a-z]*;?$"
